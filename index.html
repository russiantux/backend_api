<html>
    <head>  

      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.css">
      <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>  

        <script>
            //load github commits
            //todo: make loading commits modular for other repos

            function loadCommits() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var txt = " ";
       var gRepoN = "SpergProject";
       var gCommits = JSON.parse(this.responseText);
       var gCommitsSize = this.responseText.length;
       var demoVar = document.getElementById("demo");
      //document.getElementById("demo").innerHTML = this.responseText;

      txt += "<table class='table is-striped is-fullwidth is-narrow'>"
      txt += "<tr><th>committer</th><th>repo</th><th>commit messege</th></tr>"
    for (x in gCommits) {
      txt += "<tr><td>" + gCommits[x].committer.login +  "</td><td>"  + gRepoN + "</td><td>"  + gCommits[x].commit.message + "</td></tr>";
    }
    txt += "</table>"    
    document.getElementById("demo").innerHTML = txt;
  
      
      
      //debug to see if the JSON parser actually works
      //console.log("testing");
      console.log(gRepoN);
      console.log(gCommits[x].committer.login);
      console.log("commit msg:" + gCommits[x].commit.message);
      console.log(gCommits[x].commit.author.date);
      //JSON parser works as of 05-05-19

    }
  };
  xhttp.open("GET", "https://api.github.com/repos/russiantux/SpergProject/commits", true);
  xhttp.send(); 
}
        </script>

<nav class="navbar is-link" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="#">
          <h3 class="subtitle is-3">backend_api</h3>
      </a>
  
      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
  </nav>

  <div class="columns">
    <div class="column is-one-fifths">
        
        
      <aside class="menu">
        <ul class="menu-list">
          <li><a>feed</a></li>
          
        </ul>
        <p class="menu-label">
          projects
        </p>
        <ul class="menu-list">
          <li><a>alpha</a></li>
          <li>
            <a class="is-active">SpergProject</a>
          </li>
          
        </ul>
        <p class="menu-label">
          misc.
        </p>
        <ul class="menu-list">
          <li><a>add a project</a></li>
          <li><a>project list</a></li>
          <li><a>~DEMO~ NOT FUNCTIONAL</a></li>
        </ul>
      </aside>
    </div>
    <div class="column is-four-fifths">
        <h1 class="title is-1">SpergProject feed</h1>
        <button onclick="loadCommits()">Load Commits</button>
        <span id="demo"></span>

    </div>
    
        
  </div>
        
    </body>
</html>